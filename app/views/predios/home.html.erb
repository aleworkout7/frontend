<meta name="apple-mobile-web-app-capable" content="yes">
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Montserrat:400,700" rel="stylesheet" type="text/css">

<%= form_for("", url: shops_path, method:'get', html: { role: 'form', id: "shops_index" } ) do |f| %>
	<h1 align="center">Edificios con tiendas disponibles:</h1>

	<div class="col-md-12 pure-css-select-style theme-default">
		<%= f.select :predio_id, @predios.collect {|p| [p.name, p.id] }, { prompt: 'Elige un edificio' }, class: 'edificios' %>
	</div>
	<div class="col-md-12" align="center" style="padding: 10px;">
		<%= f.submit "Entrar", class: "btn btn-success btn-edificios" %>
	</div>
<% end %>

<style type="text/css">

.pure-css-select-style {
  width: 100%;
  overflow: hidden;
}
.pure-css-select-style select {
  width: 100%;
  padding-right: 38px;
  border: none;
  box-shadow: none;
  background: transparent;
  background-image: none;
  -webkit-appearance: none;
  outline: none;
  cursor: pointer;

  /* Hide arrow on FF */
  -moz-appearance: none;
  text-indent: 0.01px;
  text-overflow: ellipsis;
}
/* Hide arrow on IE10*/
.pure-css-select-style select::-ms-expand {
  display: none;
}
.pure-css-select-style optgroup {
  color: inherit;
  font: inherit;
}
/* IE9: To hide select arrow we make the select overflow on the right side there is not another way :( */
@media screen and (min-width:0\0) {
  .pure-css-select-style select {
    width: calc( 100% + 58px );
  }
}

/* Themes default ----------------------------------------------------------- */
.theme-default {
  border: 1px solid #bbb;
  border-radius: 2px;
  /* <svg xmlns="http://www.w3.org/2000/svg" width="11" height="11" viewBox="0 0 11 11"><path d="M4.33 8.5L0 1L8.66 1z" fill="#666"/></svg> */
  background: #fff url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2211%22%20height%3D%2211%22%20viewBox%3D%220%200%2011%2011%22%3E%3Cpath%20d%3D%22M4.33%208.5L0%201L8.66%201z%22%20fill%3D%22%23666%22%2F%3E%3C%2Fsvg%3E') right 10px center no-repeat;
}
.theme-default select {
  padding: 8px 38px 8px 8px;
  /* You can style text of the active select option */
  font: 400 18px/1.5 'Open Sans', sans-serif;
  color: #666;
}

.bootstrap-select:not([class*="col-"]):not([class*="form-control"]):not(.input-group-btn) {
  width: 100%;
}
</style>

<script type="text/javascript">

const redirectToShop = (predio) => {
	if (predio != "") {
		let url = "<%= predio_shops_path(id: 1) %>";
		url = url.replace("/1/shops", `/${predio}/shops`);

		window.location.href = url;
	}
};

$(".btn-edificios").click(function(e) {
	e.preventDefault();
	redirectToShop( $('.edificios').val() );
});

$('.edificios').change((event) => {
	redirectToShop(event.target.value);
});


</script>
